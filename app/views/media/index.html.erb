<h1><%=h t('fandoms', :default => 'Fandoms') %></h1>
<ol>
<%- @fandom_listing.each do |pair| -%>
  <% if pair[0] %>
    <li id="medium_<%= pair[0].id %>" class="category <%= cycle :odd, :even %>">
      <h2><%= link_to pair[0].name, medium_path(pair[0]) %></h2>
  <% else %>
    <li id="medium_none" class="category <%= cycle :odd, :even %>">
      <h2><%= link_to t('uncategorized_fandoms', :default => "Uncategorized Fandoms"), medium_path(:id => 0) %></h2>
  <% end %>
    <ol>
    <% 5.times do |i| %>
      <% fandom = pair[1].sort_by(&:visible_works_count).reverse[i] %>
      <% if fandom && fandom.visible_works_count > 0 %>
        <li><%= link_to_tag_works_with_text(fandom, fandom.name + " (" + fandom.visible_works_count.to_s + ")") %></li>
      <%- end -%>
    <%- end -%>
    </ol>

    <%- if pair[0] && (pair[1].size > 5 )-%>
      <p><%= link_to t('all', :default => "All {{media_type}}...", :media_type => pair[0].name), medium_path(pair[0]) %></p>
    <%- elsif pair[1].size > 5 -%>
      <p><%= link_to t('all_uncategorized', :default => "All Uncategorized Fandoms..."), medium_path(:id => 0) %></p>
    <%- end -%>
  </li>
<%- end -%>
</ol>
