<h2>Manage Tags</h2>

<div id="error"></div>

<%- unless @media.blank? %>
  <h3>Wrangle by <%= Media::NAME %>:</h3>
  <dl>
  <%- @media.each do |media| %>
    <dt><%= link_to media.name, edit_tag_path(media) -%></dt>
  <%- end -%>
  </dl>
<%- end -%>

  <h3>Bulk Wrangle <%= ArchiveConfig.FANDOM_NO_TAG_NAME %>:</h3>
  <%= link_to "Characters", 
      edit_tag_path(Fandom.find_by_name(ArchiveConfig.FANDOM_NO_TAG_NAME), 
      :only => 'Character' )-%>
  <%= link_to "Pairings", 
      edit_tag_path(Fandom.find_by_name(ArchiveConfig.FANDOM_NO_TAG_NAME), 
      :only => 'Pairing' )-%>
  <%= link_to "Freeform", 
      edit_tag_path(Fandom.find_by_name(ArchiveConfig.FANDOM_NO_TAG_NAME), 
      :only => 'Freeform' )-%>
  <%= link_to "Ambiguous", 
      edit_tag_path(Fandom.find_by_name(ArchiveConfig.FANDOM_NO_TAG_NAME), 
      :only => 'Ambiguous' )-%>
  <% if logged_in_as_admin? %>
    <%= link_to "Banned", 
      edit_tag_path(Fandom.find_by_name(ArchiveConfig.FANDOM_NO_TAG_NAME), 
      :only => 'Banned' )-%>
  <% end %>

<%- unless @unwrangled_fandoms.blank? %>
  <h3>Bulk Wrangle Fandoms:</h3>
  <p>Select the checkboxes next to the fandoms to assign them to the selected media. Note: assigning to a media makes the fandom canonical. Click on its name instead to wrangle it individually</p>
  <%- form_tag tag_wranglings_path do -%>
    <dl>
    <dt><label for="media_id">Select Media</label></dt>
    <dd>
      <%= select_tag "media_id", "<option value=''>Select #{Media::NAME}</option>" + options_from_collection_for_select(Media.canonical.sort, :id, :name), :select => "" %>
    </dd>
    <%- @unwrangled_fandoms.each do |fandom| %>
      <dt>
        <%= link_to fandom.name, edit_tag_path(fandom) -%>
        <%= check_box_tag "fandom_ids[" + fandom.id.to_s + "]" %>
      </dt>
    <%- end -%>
    </dl>
    <p class = "submit"><%= submit_tag "Assign to Media" %></p>
  <%- end -%>
<%- end -%>

<%= tag_wrangler_footer %> 
